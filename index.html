<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Question Worth Asking ðŸ’«</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Cormorant+Garamond:wght@300;400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            background: #000;
        }

        /* 4K Quality Animated Background */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: linear-gradient(45deg, #0a0015, #1a0a2e, #16213e, #0f0a1e);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Particle System for 4K effect */
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }

        .star {
            background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 70%);
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .aurora {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(138, 43, 226, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(255, 20, 147, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(0, 191, 255, 0.1) 0%, transparent 50%);
            animation: aurora-flow 20s ease-in-out infinite;
            filter: blur(60px);
        }

        @keyframes aurora-flow {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
            50% { transform: translateY(-30px) scale(1.1); opacity: 0.8; }
        }

        /* Floating particles */
        .floating-light {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            animation: float-up 15s linear infinite;
        }

        @keyframes float-up {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px) scale(1);
                opacity: 0;
            }
        }

        .container {
            background: rgba(15, 10, 30, 0.85);
            backdrop-filter: blur(20px);
            padding: 80px 60px;
            border-radius: 30px;
            box-shadow: 
                0 30px 90px rgba(0, 0, 0, 0.5),
                inset 0 1px 1px rgba(255, 255, 255, 0.1),
                0 0 60px rgba(138, 43, 226, 0.3);
            text-align: center;
            max-width: 700px;
            width: 90%;
            position: relative;
            z-index: 10;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .success-container {
            display: none;
        }

        .quote {
            font-family: 'Playfair+Display', serif;
            font-size: 1.3em;
            color: #e8d5ff;
            margin-bottom: 35px;
            font-style: italic;
            line-height: 1.8;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .quote-author {
            font-size: 0.9em;
            color: #b896d4;
            margin-top: 15px;
            font-weight: 600;
            letter-spacing: 2px;
        }

        .divider {
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #8a2be2, transparent);
            margin: 30px auto;
            opacity: 0.6;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            color: #fff;
            font-size: 3.5em;
            margin-bottom: 25px;
            font-weight: 700;
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
        }

        .question {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8em;
            color: #f0e6ff;
            margin-bottom: 50px;
            font-weight: 400;
            line-height: 1.6;
            letter-spacing: 1px;
        }

        .buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .btn {
            padding: 22px 65px;
            font-size: 1.4em;
            border: none;
            border-radius: 60px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            font-family: 'Cormorant Garamond', serif;
            letter-spacing: 3px;
            text-transform: uppercase;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-yes {
            background: linear-gradient(135deg, #c94b4b 0%, #4b134f 100%);
            color: white;
            box-shadow: 
                0 15px 45px rgba(201, 75, 75, 0.4),
                0 5px 15px rgba(75, 19, 79, 0.3),
                inset 0 -3px 7px rgba(0, 0, 0, 0.2),
                inset 0 1px 1px rgba(255, 255, 255, 0.3);
            animation: gentle-pulse 3s ease-in-out infinite;
            position: relative;
        }

        .btn-yes::after {
            content: 'âœ¨';
            position: absolute;
            right: 25px;
            font-size: 1.2em;
            animation: sparkle-rotate 2s linear infinite;
        }

        @keyframes sparkle-rotate {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
        }

        @keyframes gentle-pulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 
                    0 15px 45px rgba(201, 75, 75, 0.4),
                    0 5px 15px rgba(75, 19, 79, 0.3),
                    inset 0 -3px 7px rgba(0, 0, 0, 0.2),
                    inset 0 1px 1px rgba(255, 255, 255, 0.3);
            }
            50% { 
                transform: scale(1.03); 
                box-shadow: 
                    0 20px 60px rgba(201, 75, 75, 0.6),
                    0 10px 25px rgba(75, 19, 79, 0.5),
                    inset 0 -3px 7px rgba(0, 0, 0, 0.2),
                    inset 0 1px 1px rgba(255, 255, 255, 0.4);
            }
        }

        .btn-yes:hover {
            transform: scale(1.08) translateY(-5px);
            box-shadow: 
                0 25px 70px rgba(201, 75, 75, 0.7),
                0 15px 35px rgba(75, 19, 79, 0.6),
                inset 0 -3px 7px rgba(0, 0, 0, 0.2),
                inset 0 2px 2px rgba(255, 255, 255, 0.4);
        }

        .btn-no {
            background: rgba(255, 255, 255, 0.08);
            color: #d4b5e8;
            border: 2px solid rgba(212, 181, 232, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.2),
                inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }

        .btn-no:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(212, 181, 232, 0.5);
            box-shadow: 
                0 12px 35px rgba(0, 0, 0, 0.3),
                inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .success-message {
            animation: fadeInScale 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.8) translateY(30px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        .heart-burst {
            position: absolute;
            font-size: 50px;
            pointer-events: none;
            animation: burst-out 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes burst-out {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(1.5) rotate(360deg);
            }
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff;
            animation: sparkle-fall 4s linear infinite;
        }

        @keyframes sparkle-fall {
            0% {
                transform: translateY(-20px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Animated Flowers */
        .flower {
            position: absolute;
            font-size: 35px;
            opacity: 0;
            animation: flower-fall 12s linear infinite;
            filter: drop-shadow(0 0 8px rgba(255, 182, 193, 0.6));
        }

        @keyframes flower-fall {
            0% {
                transform: translateY(-10%) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.9;
            }
            90% {
                opacity: 0.9;
            }
            100% {
                transform: translateY(110vh) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }

        .floating-rose {
            position: absolute;
            animation: float-gentle 8s ease-in-out infinite;
            font-size: 30px;
            opacity: 0.7;
            filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.5));
        }

        @keyframes float-gentle {
            0%, 100% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }
            25% {
                transform: translateY(-20px) translateX(10px) rotate(5deg);
            }
            50% {
                transform: translateY(-30px) translateX(-5px) rotate(-5deg);
            }
            75% {
                transform: translateY(-15px) translateX(15px) rotate(3deg);
            }
        }

        .petal {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(ellipse, rgba(255, 182, 193, 0.9) 0%, rgba(255, 105, 180, 0.5) 100%);
            border-radius: 50% 0 50% 0;
            animation: petal-drift 10s ease-in-out infinite;
            opacity: 0.8;
        }

        @keyframes petal-drift {
            0% {
                transform: translateY(-5%) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(105vh) translateX(var(--drift-x, 50px)) rotate(720deg);
                opacity: 0;
            }
        }

        .success-quote {
            font-size: 1.4em;
            color: #ffd700;
            margin: 30px 0;
            font-style: italic;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        @media (max-width: 768px) {
            .container {
                padding: 50px 35px;
            }
            h1 {
                font-size: 2.5em;
            }
            .question {
                font-size: 1.4em;
            }
            .quote {
                font-size: 1.1em;
            }
            .btn {
                padding: 18px 45px;
                font-size: 1.1em;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 40px 25px;
            }
            h1 {
                font-size: 2em;
            }
            .question {
                font-size: 1.2em;
            }
            .quote {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <!-- 4K Animated Background -->
    <div class="background"></div>
    <div class="aurora"></div>

    <!-- Background Music Option 1: YouTube Embed (Hidden) -->
    <!-- Replace VIDEO_ID with the actual YouTube video ID for "Blue" by Yung Kai -->
    <!-- Example: If the URL is youtube.com/watch?v=ABC123, use ABC123 -->
     
    <!-- YOUTUBE BACKGROUND MUSIC -->

    <iframe width="0" height="0" 
        src="https://www.youtube.com/embed/GxldQ9eX2wo?autoplay=1&loop=1&playlist=GxldQ9eX2wo&controls=0&mute=0" 
        frameborder="0" 
        allow="autoplay; encrypted-media" 
        style="display:none;">
    </iframe>
    <!-- Background Music Option 2: Direct Audio File -->
    <!-- To use this option instead:
         1. Download "Blue" by Yung Kai as MP3
         2. Place it in the same folder as this HTML file
         3. Uncomment the lines below and comment out the YouTube iframe above
         4. Replace "blue-yung-kai.mp3" with your actual filename
    -->
    <!--
    <audio id="bgMusic" loop autoplay>
        <source src="blue-yung-kai.mp3" type="audio/mpeg">
    </audio>
    -->
    
    <script>
        // YouTube player volume control
        window.addEventListener('load', function() {
            const ytPlayer = document.getElementById('ytPlayer');
            if (ytPlayer && ytPlayer.contentWindow) {
                // Set YouTube volume to 25% (if using YouTube option)
                setTimeout(() => {
                    try {
                        ytPlayer.contentWindow.postMessage('{"event":"command","func":"setVolume","args":[25]}', '*');
                    } catch(e) {
                        console.log('YouTube player volume control unavailable');
                    }
                }, 1000);
            }
        });

        // If using audio file option, uncomment this:
        /*
        const bgMusic = document.getElementById('bgMusic');
        if (bgMusic) {
            bgMusic.volume = 0.25;
            
            // Ensure autoplay works (some browsers block it)
            document.addEventListener('click', function initAudio() {
                bgMusic.play().catch(e => console.log('Click anywhere to start music'));
                document.removeEventListener('click', initAudio);
            }, { once: true });
        }
        */
    </script>

    <div class="container" id="questionContainer">
        <div class="quote">
            "I have waited for this opportunity for more than half a century,<br>
            to repeat to you once again my vow of eternal fidelity and everlasting love."
            <div class="quote-author">â€” Gabriel GarcÃ­a MÃ¡rquez</div>
        </div>
        
        <div class="divider"></div>
        
        <h1>My Dearest</h1>
        <p class="question">
            Will you be my Valentine and make this the most enchanting day of my life?
        </p>
        
        <div class="buttons">
            <button class="btn btn-yes" id="yesBtn">Yes, Forever!</button>
            <button class="btn btn-no" id="noBtn">Not Sure</button>
        </div>
    </div>

    <div class="container success-container" id="successContainer">
        <div class="success-message">
            <h1 style="color: #ffd700;">Euphoria!</h1>
            
            <div class="divider"></div>
            
            <div class="success-quote">
                "To love is to burn, to be on fire."
                <div class="quote-author">â€” Jane Austen</div>
            </div>
            
            <p class="question" style="color: #fff;">
                You have illuminated my world with unparalleled radiance.<br>
                My heart overflows with profound joy and gratitude.
            </p>
            
            <div class="divider"></div>
            
            <div class="quote" style="margin-top: 30px;">
                "The mystery of human existence lies not in just staying alive,<br>
                but in finding something to live for."
                <div class="quote-author">â€” Fyodor Dostoevsky</div>
            </div>
        </div>
    </div>

    <script>
        // Create 4K quality star field
        function createStarField() {
            const background = document.querySelector('.background');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'particle star';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.animationDuration = (Math.random() * 2 + 2) + 's';
                background.appendChild(star);
            }
        }

        // Create floating lights
        function createFloatingLights() {
            const background = document.querySelector('.background');
            for (let i = 0; i < 40; i++) {
                const light = document.createElement('div');
                light.className = 'floating-light';
                light.style.left = Math.random() * 100 + '%';
                light.style.animationDelay = Math.random() * 15 + 's';
                light.style.animationDuration = (Math.random() * 10 + 10) + 's';
                background.appendChild(light);
            }
        }

        createStarField();
        createFloatingLights();
        createFlowers();
        createFloatingRoses();
        createPetals();

        // Create falling flowers
        function createFlowers() {
            const flowers = ['ðŸŒ¸', 'ðŸŒº', 'ðŸŒ¹', 'ðŸ’', 'ðŸŒ·', 'ðŸµï¸', 'ðŸ’®'];
            const background = document.querySelector('.background');
            
            for (let i = 0; i < 15; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower';
                flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
                flower.style.left = Math.random() * 100 + '%';
                flower.style.animationDelay = Math.random() * 12 + 's';
                flower.style.animationDuration = (Math.random() * 6 + 10) + 's';
                background.appendChild(flower);
            }
        }

        // Create floating roses at fixed positions
        function createFloatingRoses() {
            const background = document.querySelector('.background');
            const positions = [
                { left: '10%', top: '20%' },
                { left: '85%', top: '15%' },
                { left: '15%', top: '70%' },
                { left: '90%', top: '65%' },
                { left: '5%', top: '45%' },
                { left: '92%', top: '40%' }
            ];
            
            positions.forEach((pos, index) => {
                const rose = document.createElement('div');
                rose.className = 'floating-rose';
                rose.textContent = 'ðŸŒ¹';
                rose.style.left = pos.left;
                rose.style.top = pos.top;
                rose.style.animationDelay = (index * 1.5) + 's';
                rose.style.animationDuration = (Math.random() * 3 + 7) + 's';
                background.appendChild(rose);
            });
        }

        // Create flower petals
        function createPetals() {
            const background = document.querySelector('.background');
            
            for (let i = 0; i < 30; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDelay = Math.random() * 10 + 's';
                petal.style.animationDuration = (Math.random() * 5 + 8) + 's';
                petal.style.setProperty('--drift-x', (Math.random() - 0.5) * 200 + 'px');
                
                const colors = [
                    'rgba(255, 182, 193, 0.9)',
                    'rgba(255, 105, 180, 0.8)',
                    'rgba(219, 112, 147, 0.9)',
                    'rgba(255, 160, 200, 0.85)'
                ];
                const colorGradient = colors[Math.floor(Math.random() * colors.length)];
                petal.style.background = `radial-gradient(ellipse, ${colorGradient} 0%, rgba(255, 105, 180, 0.3) 100%)`;
                
                background.appendChild(petal);
            }
        }

        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const questionContainer = document.getElementById('questionContainer');
        const successContainer = document.getElementById('successContainer');
        
        let noBtnSize = 1;
        let yesBtnSize = 1;
        let escapeAttempts = 0;

        const shakespeareQuotes = [
            {
                text: "Love looks not with the eyes, but with the mind.",
                author: "William Shakespeare"
            },
            {
                text: "The course of true love never did run smooth.",
                author: "William Shakespeare"
            },
            {
                text: "My bounty is as boundless as the sea, my love as deep.",
                author: "William Shakespeare"
            },
            {
                text: "I would not wish any companion in the world but you.",
                author: "William Shakespeare"
            },
            {
                text: "Love is not love which alters when it alteration finds.",
                author: "William Shakespeare"
            },
            {
                text: "Hear my soul speak: the very instant that I saw you, did my heart fly to your service.",
                author: "William Shakespeare"
            }
        ];

        const dostoevskyQuotes = [
            {
                text: "To love someone means to see them as God intended them.",
                author: "Fyodor Dostoevsky"
            },
            {
                text: "Beauty will save the world.",
                author: "Fyodor Dostoevsky"
            },
            {
                text: "What is hell? The suffering of being unable to love.",
                author: "Fyodor Dostoevsky"
            }
        ];

        const romanticQuotes = [
            {
                text: "You are my sun, my moon, and all my stars.",
                author: "E.E. Cummings"
            },
            {
                text: "I love you without knowing how, or when, or from where.",
                author: "Pablo Neruda"
            },
            {
                text: "Whatever our souls are made of, yours and mine are the same.",
                author: "Emily BrontÃ«"
            },
            {
                text: "In all the world, there is no heart for me like yours.",
                author: "Maya Angelou"
            },
            {
                text: "You pierce my soul. I am half agony, half hope.",
                author: "Jane Austen"
            },
            {
                text: "I wish you to know that you have been the last dream of my soul.",
                author: "Charles Dickens"
            },
            {
                text: "If I had a flower for every time I thought of you, I could walk through my garden forever.",
                author: "Alfred Tennyson"
            },
            {
                text: "I have died everyday waiting for you.",
                author: "Christina Perri"
            },
            {
                text: "You are the finest, loveliest, tenderest person I have ever known.",
                author: "F. Scott Fitzgerald"
            },
            {
                text: "I love you more than there are stars in the sky and fish in the sea.",
                author: "Nicholas Sparks"
            },
            {
                text: "When I saw you I fell in love, and you smiled because you knew.",
                author: "Arrigo Boito"
            },
            {
                text: "I would rather share one lifetime with you than face all the ages of this world alone.",
                author: "J.R.R. Tolkien"
            },
            {
                text: "In your light, I learn how to love.",
                author: "Rumi"
            },
            {
                text: "Your love is better than ice cream.",
                author: "Sarah J. Maas"
            },
            {
                text: "To love is to burn, to be on fire.",
                author: "Jane Austen"
            },
            {
                text: "My heart is, and always will be, yours.",
                author: "Jane Austen"
            },
            {
                text: "I am yours, don't give myself back to me.",
                author: "Rumi"
            },
            {
                text: "Love recognizes no barriers.",
                author: "Maya Angelou"
            },
            {
                text: "You are my heart, my life, my one and only thought.",
                author: "Arthur Conan Doyle"
            },
            {
                text: "I carry your heart with me; I carry it in my heart.",
                author: "E.E. Cummings"
            }
        ];

        const questions = [
            "Will you be my Valentine and make this the most enchanting day of my life?",
            "Are you absolutely sure? My heart beats only for you...",
            "Please reconsider... You mean everything to me.",
            "Can you really say no to this? We're meant to be together.",
            "Think about all the beautiful moments we could share...",
            "Are you certain? I promise to cherish you forever.",
            "One more chance? You're the light of my life.",
            "My world revolves around you... Please say yes?",
            "Don't you feel what I feel? This connection is real.",
            "Just imagine how perfect we could be together...",
            "Are you really going to break my heart like this?",
            "I'll wait forever if that's what it takes... Will you be mine?",
            "You're making this harder than it needs to be... Just say yes!",
            "Come on, you know you want to say yes...",
            "Pretty please? With all the stars in the universe?",
            "I'm not giving up on us... Will you be my Valentine?",
            "Think of all the adventures we'll have together!",
            "Your smile is all I need... Please make me the happiest person alive?",
            "Just say yes already! You know we're perfect together.",
            "Last chance to make the best decision of your life... Yes?"
        ];

        let currentQuoteIndex = 0;
        let currentQuestionIndex = 0;
        const allQuotes = [...romanticQuotes, ...shakespeareQuotes, ...dostoevskyQuotes];

        // Make the "Perhaps Not" button evade
        noBtn.addEventListener('mouseover', handleNoButtonEscape);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            handleNoButtonEscape();
        });

        function handleNoButtonEscape() {
            escapeAttempts++;
            
            const container = questionContainer.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            const questionEl = document.querySelector('.question');
            const questionRect = questionEl.getBoundingClientRect();
            const quoteEl = document.querySelector('.quote');
            const quoteRect = quoteEl.getBoundingClientRect();
            
            let newX, newY;
            let attempts = 0;
            const maxAttempts = 150;
            
            do {
                // Keep button within viewport with padding
                const padding = 30;
                const maxX = window.innerWidth - 200; // Reserve space for button width
                const maxY = window.innerHeight - 100; // Reserve space for button height
                
                newX = Math.random() * (maxX - padding) + padding;
                newY = Math.random() * (maxY - padding) + padding;
                
                attempts++;
            } while (attempts < maxAttempts && (
                isOverlapping(newX, newY, 180, 80) || 
                isOverlappingQuestion(newX, newY, 180, 80, questionRect) ||
                isOverlappingQuestion(newX, newY, 180, 80, quoteRect)
            ));
            
            // Safety check: ensure button stays within visible bounds
            newX = Math.max(20, Math.min(newX, window.innerWidth - 220));
            newY = Math.max(20, Math.min(newY, window.innerHeight - 120));
            
            noBtn.style.position = 'fixed';
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
            
            // Shrink the no button, but not too much (minimum 50% size)
            noBtnSize = Math.max(0.5, noBtnSize * 0.88);
            yesBtnSize = Math.min(1.5, yesBtnSize * 1.1);
            
            noBtn.style.transform = `scale(${noBtnSize})`;
            yesBtn.style.transform = `scale(${yesBtnSize})`;
            
            // Rotate through quotes on each attempt
            currentQuoteIndex = (currentQuoteIndex + 1) % allQuotes.length;
            updateQuote(allQuotes[currentQuoteIndex]);
            
            // Change the question text
            currentQuestionIndex = (currentQuestionIndex + 1) % questions.length;
            updateQuestion(questions[currentQuestionIndex]);
        }

        function isOverlappingQuestion(x, y, w, h, rect) {
            // Add generous padding around text elements for safety
            const padding = 100;
            return !(x + w < rect.left - padding || 
                    x > rect.right + padding || 
                    y + h < rect.top - padding || 
                    y > rect.bottom + padding);
        }

        function isOverlapping(x, y, w, h) {
            const yesRect = yesBtn.getBoundingClientRect();
            return !(x + w < yesRect.left || 
                    x > yesRect.right || 
                    y + h < yesRect.top || 
                    y > yesRect.bottom);
        }

        function updateQuote(quoteObj) {
            const quote = document.querySelector('.quote');
            quote.style.transition = 'opacity 0.5s';
            quote.style.opacity = '0';
            
            setTimeout(() => {
                quote.innerHTML = `"${quoteObj.text}"<div class="quote-author">â€” ${quoteObj.author}</div>`;
                quote.style.opacity = '1';
            }, 500);
        }

        function updateQuestion(newQuestion) {
            const questionEl = document.querySelector('.question');
            questionEl.style.transition = 'opacity 0.4s, transform 0.4s';
            questionEl.style.opacity = '0';
            questionEl.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
                questionEl.textContent = newQuestion;
                questionEl.style.opacity = '1';
                questionEl.style.transform = 'translateY(0)';
            }, 400);
        }

        // When "With All My Heart" is clicked
        yesBtn.addEventListener('click', () => {
            // Create heart burst
            for (let i = 0; i < 40; i++) {
                createHeartBurst();
            }
            
            // Create sparkles
            for (let i = 0; i < 80; i++) {
                createSparkle();
            }
            
            // Transition to success
            setTimeout(() => {
                questionContainer.style.transition = 'opacity 0.8s, transform 0.8s';
                questionContainer.style.opacity = '0';
                questionContainer.style.transform = 'scale(0.9)';
                
                setTimeout(() => {
                    questionContainer.style.display = 'none';
                    successContainer.style.display = 'block';
                    successContainer.style.opacity = '0';
                    successContainer.style.transform = 'scale(0.9)';
                    
                    setTimeout(() => {
                        successContainer.style.transition = 'opacity 0.8s, transform 0.8s';
                        successContainer.style.opacity = '1';
                        successContainer.style.transform = 'scale(1)';
                    }, 50);
                }, 800);
            }, 300);
        });

        function createHeartBurst() {
            const hearts = ['ðŸ’–', 'ðŸ’', 'ðŸ’—', 'ðŸ’•', 'ðŸ’“', 'â¤ï¸', 'ðŸŒ¹', 'âœ¨'];
            const heart = document.createElement('div');
            heart.className = 'heart-burst';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            
            const angle = Math.random() * Math.PI * 2;
            const distance = 200 + Math.random() * 300;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance;
            
            heart.style.left = '50%';
            heart.style.top = '50%';
            heart.style.setProperty('--tx', tx + 'px');
            heart.style.setProperty('--ty', ty + 'px');
            heart.style.animationDelay = Math.random() * 0.3 + 's';
            
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 2500);
        }

        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.animationDelay = Math.random() * 2 + 's';
            sparkle.style.animationDuration = (Math.random() * 2 + 3) + 's';
            
            const colors = ['#ffd700', '#ff69b4', '#da70d6', '#87ceeb', '#fff'];
            sparkle.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 5000);
        }

        // Add continuous sparkles effect
        setInterval(() => {
            if (document.getElementById('successContainer').style.display === 'block') {
                createSparkle();
            }
        }, 200);
    </script>
</body>
</html>
